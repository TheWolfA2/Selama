@model IEnumerable<Selama.Areas.Account.ViewModels.Manage.ApproveUserViewModel>

@{
    ViewBag.Title = "ApproveUsers";
}

@section Scripts {
    <script type="text/javascript">
        function onUserApprovalSuccess(response)
        {
            $("tr[data-user-row='" + response + "']").remove();
        }
    </script>
}

<h2>Approve users</h2>

<table class="table table-striped">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Username)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Email)
        </th>
        <th>
        </th>
    </tr>

    @foreach (var user in Model)
    {
        <tr data-user-row="@user.UserID">
            <td>
                @Html.DisplayFor(modelItem => user.Username)
            </td>
            <td>
                @Html.DisplayFor(modelItem => user.Email)
            </td>
            <td>
                @using (Ajax.BeginForm("ConfirmUser", null, new AjaxOptions
                {
                    OnBegin = "Selama.SpinShield.raiseShield",
                    OnComplete = "Selama.SpinShield.lowerShield",
                    OnSuccess = "onUserApprovalSuccess"
                },
                new { style = "display: inline-block;" }))
                {
                    @Html.AntiForgeryToken()
                    @Html.HiddenFor(modelItem => user.UserID)
                    <button type="submit" class="btn btn-primary btn-icontext">
                        <span class="fa fa-check"></span>
                        <span>Confirm user</span>
                    </button>
                }
                @using (Ajax.BeginForm("DenyUser", null, new AjaxOptions
                {
                    OnBegin = "Selama.SpinShield.raiseShield",
                    OnComplete = "Selama.SpinShield.lowerShield",
                    OnSuccess = "onUserApprovalSuccess"
                },
                new { style = "display: inline-block;" }))
                {
                    @Html.AntiForgeryToken()
                    @Html.HiddenFor(modelItem => user.UserID)
                    <button type="submit" class="btn btn-default btn-icontext">
                        <span class="fa fa-times"></span>
                        <span>Deny user</span>
                    </button>
                }
            </td>

        </tr>
    }

</table>
